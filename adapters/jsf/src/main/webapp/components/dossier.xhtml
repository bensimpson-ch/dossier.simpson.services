<ui:composition
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

    <p:panel id="dossier" closable="false" styleClass="row content">
        <div id="dossier-functions" style="display: none">
            <h:form enctype="multipart/form-data" id="fileUploadForm">
                <p:fileUpload listener="#{dossierUploadBean.handleFileUpload}" multiple="true"
                              mode="advanced" dragDropSupport="true" update="dossier" sizeLimit="210000000"
                              dropZone="dossier" auto="true"/>
            </h:form>
        </div>
        <p:panel id="dossier-table" styleClass="#{dossierPage.styleClass}">
            <h:form id="dossierTableForm">
                <p:growl id="growlMessages" showDetail="true" skipDetailIfEqualsSummary="true"/>
                <p:dataTable var="documentMetaData" value="${dossierPage.documentMetaData}" liveResize="true"
                             selectionMode="single"
                             selection="#{dossierPage.selectedDocument}"
                             rowKey="#{documentMetaData.documentId()}">
                    <p:ajax event="rowSelect" listener="#{dossierPage.onRowSelect}" update=":dossier"
                            id="ajaxRowSelect"/>
                    <p:ajax event="rowUnselect" listener="#{dossierPage.onRowUnselect}"
                            update=":dossier"
                            id="ajaxRowUnselect"/>
                    <p:column headerText="Name" width="200px">
                        <h:outputText value="#{documentMetaData.name().value()}"/>
                    </p:column>
                    <p:column headerText="Description" rendered="#{dossierPage.hasSelectedDocument()}">
                        <h:outputText value="#{documentMetaData.description().value()}"/>
                    </p:column>
                    <p:column headerText="Size" width="75px">
                        <h:outputText value="#{documentMetaData.size()}">
                            <f:converter converterId="simpson.services.dossier.jsf.SizeConverter"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Modified" width="100px">
                        <h:outputText value="#{documentMetaData.modified()}">
                            <f:converter converterId="simpson.services.dossier.jsf.ModifiedConverter"/>
                        </h:outputText>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:panel>
        <p:panel id="dossier-viewer" styleClass="#{dossierPage.styleClass}">
            <ui:include src="viewerTabset.xhtml"/>
        </p:panel>
    </p:panel>
</ui:composition>